# Dockerを触ってみる
## Dockerとは
Dockerコンテナを運用するためのプラットフォーム。<br>
コンテナ型仮想化という技術を用いて、コンテナの上にアプリケーションを築できるソフトウェアののこと。<br>
<br>

Dockerは３つの要素から構成されている。
+ コンテナ：コードとその依存関係をパッケージ化するソフトウェアの標準ユニット
+ コンテナイメージ：コンテナの実行に必要なファイルがまとめられたソフトウェアパッケージ。docker hubというサービスからインストールできる。
+ docker engine：dockerそのもの。コンテナを作るための土台。
<br>

### Dockerのメリット
従来のサーバー仮想化と異なり、一つのOSで複数のコンテナ（ユーザー空間）を作ることができる。起動時間が短くて済む。

## Dockerを触ってみよう
1. Docker Desktopを起動する<br>
これをやらないとdocker使えない。<br>

2. 使いたいイメージを取得する(=pullという) <br>
今回は、公式Docker HubからUbuntuの公式イメージを取得する。
```
docker pull ubuntu
```
<br>

3. コンテナを作成&起動する<br>
-itつけないと、情報の入出力できなくなるので注意！
```
docker run -it ubuntu 
```
<br>

4. コンテナに入ったり出たりする<br>

[参考資料](https://qiita.com/tera_shin/items/8a43e904bd15990d3129#:~:text=%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AF%E5%81%9C%E6%AD%A2%E3%81%99%E3%82%8B%E3%80%82,P%20%2B%20Q%20%E3%82%92%E5%85%A5%E5%8A%9B%E3%81%99%E3%82%8B%E3%80%82&text=%E4%BB%BB%E6%84%8F%E3%81%AE%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E4%B8%AD%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%80%82)を元にやってみて。<br>
プログラムはデフォルトでbashになっている。

5. ディレクトリやファイルを作ったりいじったりする<br>

基本的にはいつもと同じ。vimは入っていないので、コンテナ内でvimを起動する必要がある。
```
apt update
apt install vim
vim
```
<br>

vimに入って編集したら、名前をつけて保存。
```
:w file名
```
6. ファイルをローカルとファイルを授受・共有する<br>
ホストOSで作成したファイルをコンテナ内で確認する<br>
やり方１：コピーする
```
docker cp <ホストOSのファイルのパス> <コンテナ名またはID>:<コンテナ内のディレクトリのパス>
```
- コンテナで作成したファイルをホストOSで確認するとくは目的語の順番を逆にする。ちなみに、コマンドを打つときはどちらもローカル空間で行う。
<br>

やり方２：バインドマウントする<br>
+ 定義：自分のPCのデスクトップやドキュメントをdockerと紐付ける
+ 実行すると...どちらからでも編集できる、変更点はどちらにも反映される
```
docker run -dit -v ~/trains2024:/root ubuntu bash
```
<br>

7. コンテナの一覧を確認する
```
docker ps (-a)
```
- オプションなし：起動しているコンテナ一覧
- -a　あり：起動や停止に関わらずコンテナ一覧
- 書かれている内容は以下の通り。
    |名前|意味|
    |-|-|
    |CONTAINER ID|コンテナ識別子|
    |IMAGE|イメージ名|
    |COMMAND|起動時に行うプログラム|
    |CREATED|作成日時|
    |STATUS|起動/停止|
    |PORTS|ポート番号|
    |NAME|コンテナ名| 
    <br>

8. コンテナを停止、再開、削除<br>
停止　`docker stop container_ID` <br>
再開　`docker start container_ID` <br>
削除　`docker rm container_ID`
<br>

9. 保存されているイメージを確認
```
docker images
or
docker image ls
```
<br>

10. インスタンス環境でもやってみよう <br>
インスタンス環境にログインして、1. からやったらできるよ

